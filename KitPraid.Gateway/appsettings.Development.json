{
  "ReverseProxy": {
    "Routes": {
      // IdentityServer routes
      "identity-route": {
        "ClusterId": "identity-cluster",
        "Match": { "Path": "/identity/{**catch-all}" },
        "Transforms": [
          { "PathRemovePrefix": "/identity" }
        ]
      },

      // Product scalar route
      "product-scalar-route": {
        "ClusterId": "product-cluster",
        "Match": { "Path": "/products/scalar" },
        "Transforms": [
          { "PathSet": "/scalar" }
        ]
      },

      // Product root route
      "product-root-route": {
        "ClusterId": "product-cluster",
        "Match": { "Path": "/products" },
        "Transforms": [
          { "PathSet": "/Product" }
        ]
      },

      // Product general routes
      "product-route": {
        "ClusterId": "product-cluster",
        "Match": { "Path": "/products/{**all}" },
        "Transforms": [
          { "PathSet": "/Product/{all}" }
        ]
      },

      // Category scalar route
      "category-scalar-route": {
        "ClusterId": "category-cluster",
        "Match": { "Path": "/categories/scalar" },
        "Transforms": [
          { "PathSet": "/scalar" }
        ]
      },

      // Category general wildcard route (handles /tree, /123, etc.)
      "category-route": {
        "ClusterId": "category-cluster",
        "Match": { "Path": "/categories/{**all}" },
        "Transforms": [
          { "PathSet": "/Category/{all}" }
        ]
      },

      // Category root route
      "category-root-route": {
        "ClusterId": "category-cluster",
        "Match": { "Path": "/categories" },
        "Transforms": [
          { "PathSet": "/Category" }
        ]
      }
    },

    "Clusters": {
      "identity-cluster": {
        "Destinations": {
          "d1": { "Address": "https://localhost:5002" }
        }
      },

      "product-cluster": {
        "Destinations": {
          "d1": { "Address": "https://localhost:6162" }
        }
      },

      "category-cluster": {
        "Destinations": {
          "d1": { "Address": "https://localhost:8386" }
        }
      }
    }
  }
}
